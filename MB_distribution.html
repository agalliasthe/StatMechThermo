<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Maxwell-Boltzmann distribution</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="canvas">
    <div id="container">
        <div id="dividingline"></div>
        <div class="ball" id="body0"></div>
        <div class="ball" id="body1"></div>
        <div class="ball" id="body2"></div>
        <div class="ball" id="body3"></div>
        <div class="ball" id="body4"></div>
        <div class="ball" id="body5"></div>
        <div class="ball" id="body6"></div>
        <div class="ball" id="body7"></div>
        <div class="ball" id="body8"></div>
        <div class="ball" id="body9"></div>
        <div class="ball" id="body10"></div>
        <div class="ball" id="body11"></div>
        <div class="ball" id="body12"></div>
        <div class="ball" id="body13"></div>
        <div class="ball" id="body14"></div>
        <div class="ball" id="body15"></div>
        <div class="ball" id="body16"></div>
        <div class="ball" id="body17"></div>
        <div class="ball" id="body18"></div>
        <div class="ball" id="body19"></div>
        <div class="ball" id="body20"></div>
        <div class="ball" id="body21"></div>
        <div class="ball" id="body22"></div>
        <div class="ball" id="body23"></div>
        <div class="ball" id="body24"></div>
        <div class="ball" id="body25"></div>
        <div class="ball" id="body26"></div>
        <div class="ball" id="body27"></div>
        <div class="ball" id="body28"></div>
        <div class="ball" id="body29"></div>
        <div class="ball" id="body30"></div>
        <div class="ball" id="body31"></div>
        <div class="ball" id="body32"></div>
        <div class="ball" id="body33"></div>
        <div class="ball" id="body34"></div>
        <div class="ball" id="body35"></div>
        <div class="ball" id="body36"></div>
        <div class="ball" id="body37"></div>
        <div class="ball" id="body38"></div>
        <div class="ball" id="body39"></div>
        <div class="ball" id="body40"></div>
        <div class="ball" id="body41"></div>
        <div class="ball" id="body42"></div>
        <div class="ball" id="body43"></div>
        <div class="ball" id="body44"></div>
        <div class="ball" id="body45"></div>
        <div class="ball" id="body46"></div>
        <div class="ball" id="body47"></div>
        <div class="ball" id="body48"></div>
        <div class="ball" id="body49"></div>
        <div class="ball" id="body50"></div>
        <div class="ball" id="body51"></div>
        <div class="ball" id="body52"></div>
        <div class="ball" id="body53"></div>
        <div class="ball" id="body54"></div>
        <div class="ball" id="body55"></div>
        <div class="ball" id="body56"></div>
        <div class="ball" id="body57"></div>
        <div class="ball" id="body58"></div>
        <div class="ball" id="body59"></div>
        <div class="ball" id="body60"></div>
        <div class="ball" id="body61"></div>
        <div class="ball" id="body62"></div>
        <div class="ball" id="body63"></div>
        <div class="ball" id="body64"></div>
        <div class="ball" id="body65"></div>
        <div class="ball" id="body66"></div>
        <div class="ball" id="body67"></div>
        <div class="ball" id="body68"></div>
        <div class="ball" id="body69"></div>
        <div class="ball" id="body70"></div>
        <div class="ball" id="body71"></div>
        <div class="ball" id="body72"></div>
        <div class="ball" id="body73"></div>
        <div class="ball" id="body74"></div>
        <div class="ball" id="body75"></div>
        <div class="ball" id="body76"></div>
        <div class="ball" id="body77"></div>
        <div class="ball" id="body78"></div>
        <div class="ball" id="body79"></div>
        <div class="ball" id="body80"></div>
        <div class="ball" id="body81"></div>
        <div class="ball" id="body82"></div>
        <div class="ball" id="body83"></div>
        <div class="ball" id="body84"></div>
        <div class="ball" id="body85"></div>
        <div class="ball" id="body86"></div>
        <div class="ball" id="body87"></div>
        <div class="ball" id="body88"></div>
        <div class="ball" id="body89"></div>
        <div class="ball" id="body90"></div>
        <div class="ball" id="body91"></div>
        <div class="ball" id="body92"></div>
        <div class="ball" id="body93"></div>
        <div class="ball" id="body94"></div>
        <div class="ball" id="body95"></div>
        <div class="ball" id="body96"></div>
        <div class="ball" id="body97"></div>
        <div class="ball" id="body98"></div>
        <div class="ball" id="body99"></div>
    </div>
    <div id="frametop"></div>
    <div id="frameleft"></div>
    <div id="frameright"></div>
    <div id="framebottom"></div>
    <div id="plotspace"></div>
</div>

<script src="jquery.js" type="text/javascript"></script>
<script src="jquery.flot.js" type="text/javascript"></script>
<script src="animate.js" type="text/javascript"></script>
<script src="dynamics.js" type="text/javascript"></script>
<script type = "text/javascript">

    var rmax = 2.5;
    var req = 6.0; // for now all bodies have same r_eq
    var epsilon = 2.0;
    var rcut = req * 2;
    var xmax = 50;
    var ymax = 15;
    var temp = 8;
    var tempmin = 2;
    var tempmax = 8;
    var nstep = 1000;
    var dt = 0.01;
    var periodicbc = 1;
    var initialspace = 5; // make sure not too close together given the req or rmax.
    var ndata = 25;
    var nbin = 25;
    var nframe = 50;
    var bodies1 = [];
    var histodum1 = [];
    var tdData1 = [];
    var data1 = [];

    // initialize
    var x0 = -xmax + rmax;
    var y0 = -ymax + rmax;
    var r0 = rmax;
    var ibody = 0;
    do {
        do {
            //r0 = Math.random() * (rmax - 0.5) + 0.5;
            bodies1[ibody] = new NewBody(r0,x0,y0);
            y0 += initialspace;//2 * rmax;
            ibody += 1;
        } while (y0 < ymax - rmax);
        y0 = -ymax + rmax;
        x0 += initialspace;//2 * rmax;
    } while (x0 < xmax - rmax);
    // equilibrate
    for (var istep = 0; istep < nstep; istep++) {
        bodies1 = ljStep(bodies1);
    }
    newStyle (bodies1);

    // simulate
    setInterval (frame,1);
    var iframe = nframe - 1;
    for (var ibin = 0; ibin < nbin; ibin++){
        data1.push([]);
        data1[ibin].push(ibin);
        data1[ibin].push(0);
    }
    for (var idata = 0; idata < ndata; idata++) {
        tdData1.push([]);
        for (ibin = 0; ibin < nbin; ibin++) {
            tdData1[idata].push(0);
        }
    }
    function frame () {
        var sum1;
        iframe += 1;
        bodies1 = ljStep(bodies1);
        //bodies1 = elasticStep(bodies1);
        newStyle (bodies1);
        histodum1 = velDist(bodies1);
        tdData1.push([]);
        for (ibin = 0; ibin < nbin; ibin++) {
            tdData1[idata].push(histodum1[ibin]);
        }
        if (tdData1.length > ndata) tdData1.splice(0,tdData1.length - ndata);
        for (ibin = 0; ibin < ndata; ibin++) {
            sum1 = 0;//Math.random();
            for (idata = 0; idata < ndata; idata++) {
                sum1 += tdData1[idata][ibin];
            }
            data1[ibin][1] = sum1;
        }
        if (iframe === nframe) {
            $.plot("#plotspace",
                    [
                        {data: data1, bars:{ show: true }}
                    ],
                    {
                        yaxis: {show: false},
                        xaxis: {show: false}
                    }
            );
            iframe = 0;
        }
    }

</script>

</body>
</html>
